{"ast":null,"code":"import _slicedToArray from \"/home/tadeu/JSProjects/PI/FluxoDeRestaurante/frontend/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/tadeu/JSProjects/PI/FluxoDeRestaurante/frontend/web/src/pages/table/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport useForm from \"react-hook-form\";\nimport api from \"../../services/api\";\nimport { Modal } from 'react-bootstrap';\nimport NavBar from \"../../components/navBar\";\nimport HomeBar from \"../../components/homeBar\";\nimport \"./styles.css\";\nimport direction from \"../../assets/button/direction.svg\";\nimport exclude from \"../../assets/button/destroy.svg\";\nexport default function Table() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        tables = _useState2[0],\n        setTables = _useState2[1];\n\n  const _useForm = useForm(),\n        register = _useForm.register,\n        handleSubmit = _useForm.handleSubmit,\n        errors = _useForm.errors;\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        classifications = _useState4[0],\n        setClassifications = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        smShow = _useState6[0],\n        setSmShow = _useState6[1];\n\n  useEffect(() => {\n    window.setTimeout(() => {\n      setSmShow(false);\n    }, 3000);\n  }, [smShow]);\n\n  const onSubmit = async data => {\n    const number = data.number,\n          classification = data.classification,\n          vacancies = data.vacancies;\n    const response = await api.post(\"/table\", {\n      number,\n      vacancies,\n      classification\n    });\n    tables.push(response.data);\n    localStorage.setItem(\"tables\", JSON.stringify(tables));\n    setTables(JSON.parse(localStorage.getItem(\"tables\")));\n    setSmShow(true);\n  };\n\n  const newTable = React.createElement(Modal, {\n    size: \"sm\",\n    show: smShow,\n    onHide: () => setSmShow(false),\n    \"aria-labelledby\": \"example-modal-sizes-title-sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    closeButton: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(Modal.Title, {\n    id: \"example-modal-sizes-title-sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Adicionado\")), React.createElement(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \" A mesa foi adicionado\"));\n  const tableList = React.createElement(\"ul\", {\n    className: \"table-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, classifications.map(item => {\n    if (item.section === \"table\") {\n      return React.createElement(\"li\", {\n        key: item._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, item.classification), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, tables.map(subItem => {\n        if (subItem.classification._id === item._id) {\n          return React.createElement(\"li\", {\n            key: subItem._id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            key: subItem._id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }, \"Mesa: \", React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, subItem.number)), React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, \"Lugares: \", React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }, subItem.vacancies)), React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }, \"Disponibilidade: \", React.createElement(\"strong\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }, subItem.availability === true ? \"Disponivel\" : \"Ocupada\")), React.createElement(\"button\", {\n            className: \"direction\",\n            onClick: () => handleAvailability(subItem),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: direction,\n            alt: \"direction\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          })), React.createElement(\"button\", {\n            className: \"exclude\",\n            onClick: () => handleDestroy(subItem),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: exclude,\n            alt: \"destroy\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 81\n            },\n            __self: this\n          })));\n        }\n      })));\n    }\n  }));\n\n  async function handleDestroy(table) {\n    const response = await api.delete(\"table/\".concat(table._id));\n    console.log(response);\n    const index = tables.indexOf(table._id);\n    tables.splice(index, 1);\n    console.log(tables);\n    localStorage.setItem(\"tables\", JSON.stringify(tables));\n    loadTable();\n  }\n\n  function handleAvailability(table) {\n    table.availability ? table.availability = false : table.availability = true;\n    const index = tables.indexOf(table._id);\n    tables[index] = table;\n    localStorage.setItem(\"tables\", JSON.stringify(tables));\n    loadTable();\n  }\n\n  function loadTable() {\n    setTables(JSON.parse(localStorage.getItem(\"tables\")));\n  }\n\n  useEffect(() => {\n    loadTable();\n    setClassifications(JSON.parse(localStorage.getItem(\"classification\")));\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(HomeBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"containerTable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(NavBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"grid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"listTable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, tableList), React.createElement(\"div\", {\n    id: \"createTable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"N\\xFAmero\"), React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"N\\xFAmero\",\n    name: \"number\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  })), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, \"Local\"), React.createElement(\"select\", {\n    name: \"classification\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }), classifications.map(item => {\n    if (item.section === \"table\") {\n      return React.createElement(\"option\", {\n        key: item._id,\n        value: item._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, item.classification);\n    }\n  }))), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Lugares\"), React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"lugares\",\n    name: \"vacancies\",\n    ref: register({\n      required: true,\n      min: 0\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }))))), newTable);\n}","map":{"version":3,"sources":["/home/tadeu/JSProjects/PI/FluxoDeRestaurante/frontend/web/src/pages/table/index.js"],"names":["React","useState","useEffect","useForm","api","Modal","NavBar","HomeBar","Table","tables","setTables","register","handleSubmit","errors","classifications","setClassifications","smShow","setSmShow","window","setTimeout","onSubmit","data","number","classification","vacancies","response","post","push","localStorage","setItem","JSON","stringify","parse","getItem","newTable","tableList","map","item","section","_id","subItem","availability","handleAvailability","direction","handleDestroy","exclude","table","delete","console","log","index","indexOf","splice","loadTable","required","min"],"mappings":"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","sourcesContent":["import React, { useState, useEffect  } from \"react\";\nimport useForm from \"react-hook-form\";\nimport api from \"../../services/api\"\nimport { Modal }  from  'react-bootstrap' ;\n\nimport NavBar from \"../../components/navBar\";\nimport HomeBar from \"../../components/homeBar\";\nimport \"./styles.css\";\n\nimport direction from \"../../assets/button/direction.svg\";\nimport exclude from \"../../assets/button/destroy.svg\";\n\nexport default function Table() {\n  const [tables, setTables]= useState([]);\n  const { register, handleSubmit, errors } = useForm();\n  const [classifications, setClassifications]= useState([])\n  const [smShow, setSmShow] = useState(false);\n\n  useEffect(()=>{\n    window.setTimeout(()=>{setSmShow(false)}, 3000)\n  },[smShow])\n\n  const onSubmit = async data => {\n    const { number, classification, vacancies } = data;\n   const response = await api.post(\"/table\", {\n      number,\n      vacancies,\n      classification\n  });\n  tables.push(response.data)\n\n\n\n    localStorage.setItem(\"tables\", JSON.stringify(tables))\n    setTables(JSON.parse(localStorage.getItem(\"tables\")));\n    setSmShow(true)\n\n\n}\nconst newTable = (\n  <Modal\n        size=\"sm\"\n        show={smShow}\n        onHide={() => setSmShow(false)}\n        aria-labelledby=\"example-modal-sizes-title-sm\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"example-modal-sizes-title-sm\">\n           Adicionado\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body> A mesa foi adicionado</Modal.Body>\n      </Modal>\n)\n  const tableList=(\n  <ul className=\"table-list\">\n    {classifications.map(item => {\n      if(item.section === \"table\"){\n        return(\n        <li key={item._id}>\n          <h3>{item.classification}</h3>\n          <ul>\n          {tables.map(subItem => {\n            if(subItem.classification._id === item._id){\n              return(\n\n          <li key={subItem._id}>\n            <span key={subItem._id}>\n              Mesa: <strong>{subItem.number}</strong>\n            </span>\n            <span>\n              Lugares: <strong>{subItem.vacancies }</strong>\n            </span>\n            <span>\n              Disponibilidade: <strong>{subItem.availability=== true?\"Disponivel\":\"Ocupada\"}</strong>\n            </span>\n            <button className=\"direction\" onClick={() => handleAvailability(subItem)}>\n              <img src={direction} alt=\"direction\" />\n            </button>\n            <button className=\"exclude\" onClick={() => handleDestroy(subItem)}>\n              <img src={exclude} alt=\"destroy\" />\n            </button>\n          </li>\n        )}})\n      }\n          </ul>\n        </li>\n\n       )}\n    })}\n\n    </ul>\n\n\n)\n\n\n  async function handleDestroy(table){\n    const response = await api.delete(`table/${table._id}`)\n    console.log(response)\n    const index = tables.indexOf(table._id)\n    tables.splice(index,1)\n    console.log(tables)\n    localStorage.setItem(\n      \"tables\",\n    JSON.stringify( tables))\n    loadTable()\n\n\n  }\n  function handleAvailability(table){\n    table.availability?table.availability = false:table.availability = true\n    const index = tables.indexOf(table._id)\n    tables[index] = table\n    localStorage.setItem(\"tables\", JSON.stringify( tables))\n    loadTable()\n\n  }\nfunction loadTable(){\n  setTables(JSON.parse(localStorage.getItem(\"tables\")));\n\n}\n  useEffect(() => {\n    loadTable()\n    setClassifications(JSON.parse(localStorage.getItem(\"classification\")))\n  }, []);\n  return (\n\n    <>\n      <HomeBar />\n      <div id=\"containerTable\">\n        <NavBar />\n        <div className=\"grid\">\n          <div id=\"listTable\" >\n           {tableList}\n          </div>\n          <div id=\"createTable\" >\n          <form onSubmit={handleSubmit(onSubmit)}>\n              <fieldset>\n                <legend>Número</legend>\n                <input\n                  type=\"number\"\n                  placeholder=\"Número\"\n                  name=\"number\"\n                  ref={register({ required: true })}\n                />\n              </fieldset>\n              <fieldset>\n                <legend>Local</legend>\n                <select name=\"classification\"  ref={register({ required: true })}>\n                  <option value=\"\"></option>\n                  {classifications.map(item => {\n                    if(item.section === \"table\"){\n                      return(\n                      <option key={item._id} value={item._id}>{item.classification}</option>\n                      )\n                    }\n                  })}\n                </select>\n              </fieldset>\n              <fieldset>\n                <legend>Lugares</legend>\n                <input\n                  type=\"number\"\n                  placeholder=\"lugares\"\n                  name=\"vacancies\"\n                  ref={register({ required: true, min: 0 })}\n                />\n              </fieldset>\n              <input type=\"submit\" />\n            </form>\n          </div>\n        </div>\n\n      </div>\n      {newTable}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}